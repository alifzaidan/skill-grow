import{r as m}from"./app-BT9PvqFc.js";import{d as M,f as h,e as V,J as b,b as x,g as E,h as p,u as F,M as I}from"./proxy-I25wgfLC.js";import{u as S}from"./use-motion-value-CoSQ4MIP.js";function J(...t){const e=!Array.isArray(t[0]),o=e?0:-1,r=t[0+o],n=t[1+o],s=t[2+o],a=t[3+o],u=M(n,s,a);return e?u(r):u}function D(t,e,o){const r=t.get();let n=null,s=r,a;const u=typeof r=="string"?r.replace(/[\d.-]/g,""):void 0,c=()=>{n&&(n.stop(),n=null)},C=()=>{c(),n=new b({keyframes:[g(t.get()),g(s)],velocity:t.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...o,onUpdate:a})};if(t.attach((i,f)=>{s=i,a=l=>f(d(l,u)),h.postRender(C)},c),V(e)){const i=e.on("change",l=>t.set(d(l,u))),f=t.on("destroy",i);return()=>{i(),f()}}return c}function d(t,e){return e?t+e:t}function g(t){return typeof t=="number"?t:parseFloat(t)}function A(t,e){const o=S(e()),r=()=>o.set(e());return r(),x(()=>{const n=()=>h.preRender(r,!1,!0),s=t.map(a=>a.on("change",n));return()=>{s.forEach(a=>a()),E(r)}}),o}function L(t){p.current=[],t();const e=A(p.current,t);return p.current=void 0,e}function N(t,e,o,r){if(typeof t=="function")return L(t);const n=typeof e=="function"?e:J(e,o,r);return Array.isArray(t)?y(t,n):y([t],([s])=>n(s))}function y(t,e){const o=F(()=>[]);return A(t,()=>{o.length=0;const r=t.length;for(let n=0;n<r;n++)o[n]=t[n].get();return e(o)})}function k(t,e={}){const{isStatic:o}=m.useContext(I),r=()=>V(t)?t.get():t;if(o)return N(r);const n=S(r());return m.useInsertionEffect(()=>D(n,t,e),[n,JSON.stringify(e)]),n}export{N as a,k as u};
