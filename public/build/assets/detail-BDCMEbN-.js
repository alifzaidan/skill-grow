import{r as A,m as z,j as e,L as y,$ as u,S as K}from"./app-12w6AqM-.js";import{B as n}from"./button-BvelY46d.js";import{D as P,b as T,g as R,c as $,d as M}from"./dialog-Ds401d4C.js";import{T as E}from"./textarea-cih-2ipD.js";import{S as f}from"./star-DRQkJzS9.js";import{P as U}from"./progress-BIuT-s6A.js";import{P as w}from"./layout-DACh8ZSz.js";import{U as S}from"./user-layout-ZKMSoalK.js";import{A as v}from"./arrow-left-C9SWuQMQ.js";import{C}from"./circle-play-D-6uDpeI.js";import{C as O}from"./circle-check-big-CbZyKfS2.js";import{B as D}from"./badge-check-CWc5XWkk.js";import{A as B}from"./award-CYbv9p1s.js";import{D as L}from"./download-CWD6wYro.js";import{E as F}from"./eye-BJEI2PpU.js";/* empty css            */import"./index-BiaxBuKL.js";import"./index-PT1u_qXw.js";import"./utils-D3sAJBvS.js";import"./index-HN4GepaU.js";import"./index-Dtx3l6qw.js";import"./Combination-DURgrhrb.js";import"./x-D_nrB9Rr.js";import"./createLucideIcon-CYMSOx0u.js";import"./avatar-CEsTz0UM.js";import"./index-CXGKlQKn.js";import"./index-Dy2UpUg7.js";import"./use-initials-aLgWdtma.js";import"./monitor-play--0bi7bsp.js";import"./presentation-DwSVG74v.js";import"./banknote-Cra69CUE.js";import"./breadcrumbs-40iiMZeL.js";import"./tooltip-BufDoz4G.js";import"./index-G98_XBUQ.js";import"./floating-ui.react-dom-D0-u0_JM.js";import"./index-CVYCC7x0.js";import"./index-Bt1E_LHK.js";import"./dropdown-menu-BlslHCjY.js";import"./index-B0Q7nae3.js";import"./check-DlNTkwmS.js";import"./user-Da0lPb_l.js";import"./chevron-right-B7yjen6p.js";import"./sonner-Hg-8Out9.js";import"./index-D91qLVC2.js";import"./icon-BOwItDgn.js";import"./index-CHPAUxEL.js";import"./badge-CtC0jXS8.js";import"./command-CjYq1F75.js";import"./search-DBvayw3z.js";import"./clock-Du0nGwsi.js";import"./house-BGlgAMyt.js";function H({isOpen:d,onClose:l,course:i}){const[c,g]=A.useState(0),{data:r,setData:a,post:s,processing:o,errors:m,reset:h}=z({rating:0,review:""}),p=t=>{t.preventDefault(),s(route("course.rating.store",i.id),{onSuccess:()=>{h(),l()}})},b=t=>{a("rating",t)},j=t=>{g(t)},x=()=>{g(0)},N=t=>{const _=c||r.rating;return t<=_?"text-yellow-400":"text-gray-300"},k=()=>{h(),l()};return e.jsx(P,{open:d,onOpenChange:k,children:e.jsxs(T,{className:"max-w-2xl",children:[e.jsxs(R,{children:[e.jsx($,{className:"text-xl font-bold",children:"Berikan Rating & Review"}),e.jsx(M,{children:"Bagikan pengalaman Anda mengikuti kelas ini"})]}),e.jsx("div",{className:"mb-4 rounded-lg border border-gray-200 bg-gray-50 p-4 dark:border-gray-700 dark:bg-gray-800",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:i.thumbnail?`/storage/${i.thumbnail}`:"/assets/images/placeholder.png",alt:i.title,className:"h-16 w-16 rounded-lg object-cover"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:i.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:i.description})]})]})}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium",children:["Rating ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(t=>e.jsx("button",{type:"button",onClick:()=>b(t),onMouseEnter:()=>j(t),onMouseLeave:x,className:"transition-colors duration-150",children:e.jsx(f,{className:`h-8 w-8 ${N(t)} ${t<=(c||r.rating)?"fill-current":""}`})},t)),e.jsx("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:r.rating>0&&e.jsxs(e.Fragment,{children:[r.rating,"/5 -"," ",r.rating===1?"Sangat Buruk":r.rating===2?"Buruk":r.rating===3?"Cukup":r.rating===4?"Baik":"Sangat Baik"]})})]}),m.rating&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.rating})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium",children:["Review ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(E,{value:r.review,onChange:t=>a("review",t.target.value),placeholder:"Ceritakan pengalaman Anda mengikuti kelas ini. Apa yang Anda sukai? Apa yang bisa diperbaiki?",rows:4,className:"resize-none"}),e.jsxs("div",{className:"mt-1 flex justify-between text-sm text-gray-500",children:[e.jsx("span",{children:m.review&&e.jsx("span",{className:"text-red-600",children:m.review})}),e.jsxs("span",{children:[r.review.length,"/1000"]})]})]}),e.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-3 dark:border-green-800 dark:bg-green-900/20",children:e.jsxs("p",{className:"text-sm text-green-800 dark:text-green-200",children:[e.jsx("strong",{children:"Catatan:"})," Setelah Anda mengirim rating dan review, sertifikat kelulusan akan langsung tersedia untuk diunduh."]})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(n,{type:"button",variant:"outline",className:"flex-1",onClick:k,disabled:o,children:"Batal"}),e.jsx(n,{type:"submit",className:"flex-1",disabled:o||r.rating===0||r.review.length<1,children:o?"Mengirim...":"Kirim Rating"})]})]})]})})}function q(d){if(!d)return[];const l=d.match(/<li>(.*?)<\/li>/g);return l?l.map(i=>i.replace(/<\/?li>/g,"").trim()):[]}function Fe({course:d,courseRating:l,certificate:i,certificateParticipant:c}){var j;const[g,r]=A.useState(!1);if(!d)return e.jsxs(S,{children:[e.jsx(y,{title:"Kelas Tidak Ditemukan"}),e.jsx(w,{children:e.jsx("div",{className:"flex h-screen items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"mb-4",children:"Detail kelas tidak dapat ditemukan."}),e.jsx(n,{asChild:!0,children:e.jsxs(u,{href:"/profile",children:[e.jsx(v,{className:"mr-2 h-4 w-4"})," Kembali Ke Dashboard"]})})]})})})]});const a=(j=d.course_items)==null?void 0:j[0],s=a==null?void 0:a.course,o=d.status,m=q(s==null?void 0:s.key_points),h=(a==null?void 0:a.progress)===100,p=i&&h&&l&&o==="paid",b=()=>!a||a.progress!==100?null:l?l&&!p?e.jsxs("div",{className:"group relative overflow-hidden rounded-2xl border-2 border-yellow-200 bg-gradient-to-br from-yellow-50 via-white to-yellow-100 p-6 shadow-lg dark:border-yellow-700 dark:from-yellow-900/20 dark:to-yellow-800/20",children:[e.jsx("div",{className:"pointer-events-none absolute top-0 right-0 h-32 w-32 rounded-bl-full bg-gradient-to-bl from-yellow-300 to-transparent opacity-30 transition group-hover:scale-110"}),e.jsxs("div",{className:"relative z-10 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-full bg-gradient-to-br from-yellow-400 to-orange-500 shadow-lg",children:e.jsx(B,{className:"h-7 w-7 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:"ðŸŽ‰ Terima kasih atas rating Anda!"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:i?"Sertifikat sedang diproses.":"Sertifikat belum dibuat untuk course ini."}),e.jsxs("div",{className:"mt-2 flex items-center gap-1",children:[[1,2,3,4,5].map(x=>e.jsx(f,{className:`h-4 w-4 ${x<=l.rating?"fill-current text-yellow-400":"text-gray-300"}`},x)),e.jsxs("span",{className:"ml-1 text-sm text-gray-600",children:["(",l.rating,"/5)"]})]})]})]}),e.jsxs(n,{disabled:!0,variant:"outline",children:[e.jsx(L,{className:"mr-2 h-4 w-4"}),i?"Menunggu Sertifikat":"Sertifikat Belum Tersedia"]})]})]}):p?e.jsxs("div",{className:"group relative overflow-hidden rounded-2xl border-2 border-green-200 bg-gradient-to-br from-green-50 via-white to-emerald-100 p-6 shadow-lg dark:border-green-700 dark:from-green-900/20 dark:to-emerald-800/20",children:[e.jsx("div",{className:"pointer-events-none absolute top-0 right-0 h-32 w-32 rounded-bl-full bg-gradient-to-bl from-green-300 to-transparent opacity-30 transition group-hover:scale-110"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"mb-4 flex items-center gap-4",children:[e.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-full bg-gradient-to-br from-green-400 to-emerald-600 shadow-lg",children:e.jsx(B,{className:"h-7 w-7 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:"ðŸŽ‰ Sertifikat Kelulusan Tersedia!"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Anda telah berhasil menyelesaikan kelas ini dan sertifikat sudah siap diunduh"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[c&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["No. Sertifikat: ",String(c.certificate_number).padStart(4,"0"),"/",i.certificate_number]}),e.jsx(u,{href:route("certificate.participant.detail",{code:c.certificate_code}),className:"text-sm text-green-600 underline hover:text-green-800 dark:text-green-400",children:"Lihat Detail Sertifikat"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{asChild:!0,children:e.jsxs("a",{href:route("profile.course.certificate",{course:s.slug}),target:"_blank",children:[e.jsx(L,{size:16,className:"mr-2"}),"Unduh"]})}),e.jsx(n,{variant:"outline",asChild:!0,children:e.jsxs("a",{href:route("profile.course.certificate.preview",{course:s.slug}),target:"_blank",children:[e.jsx(F,{size:16,className:"mr-2"}),"Preview"]})})]})]})]})]}):null:e.jsxs("div",{className:"group relative overflow-hidden rounded-2xl border-2 border-blue-200 bg-gradient-to-br from-blue-50 via-white to-blue-100 p-6 shadow-lg transition hover:shadow-xl dark:border-blue-700 dark:from-blue-900/20 dark:to-blue-800/20",children:[e.jsx("div",{className:"pointer-events-none absolute top-0 right-0 h-32 w-32 rounded-bl-full bg-gradient-to-bl from-blue-300 to-transparent opacity-30 transition group-hover:scale-110"}),e.jsxs("div",{className:"relative z-10 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-full bg-gradient-to-br from-[#fccd22] to-[#200cf5] shadow-lg",children:e.jsx(f,{className:"h-7 w-7 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:"ðŸŽ‰ Selamat! Anda telah menyelesaikan kelas ini"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Berikan rating dan review untuk mendapatkan sertifikat kelulusan"})]})]}),e.jsxs(n,{onClick:()=>r(!0),children:[e.jsx(f,{className:"mr-2 h-4 w-4"}),"Beri Rating"]})]})]});return e.jsxs(S,{children:[e.jsx(y,{title:(s==null?void 0:s.title)||"Detail Kelas"}),e.jsx(w,{children:s?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"mb-2 text-3xl font-bold italic",children:s.title}),e.jsx("p",{className:"text-muted-foreground",children:"Detail progres dan sertifikat kelas Anda"})]}),e.jsx(n,{variant:"outline",asChild:!0,children:e.jsxs(u,{href:"/profile",children:[e.jsx(v,{className:"mr-2 h-4 w-4"}),"Kembali"]})})]}),o!=="paid"&&e.jsx("div",{className:"rounded-2xl border-2 border-red-200 bg-gradient-to-br from-red-50 to-pink-50 p-6 shadow-lg dark:border-red-700 dark:from-red-900/20 dark:to-pink-900/20",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100 dark:bg-red-800",children:e.jsx("span",{className:"text-2xl",children:"âš ï¸"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-red-900 dark:text-red-100",children:["Status Pembayaran: ",o.toUpperCase()]}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:o==="failed"?"Pembayaran gagal atau dibatalkan. Silakan lakukan pembelian ulang.":"Selesaikan pembayaran untuk mengakses kelas."})]})]})}),b(),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-6 lg:col-span-2",children:[e.jsxs("div",{className:"rounded-2xl border bg-white p-6 shadow-lg dark:bg-zinc-800",children:[e.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[e.jsx("div",{className:"rounded-full bg-gradient-to-br from-[#fccd22] to-[#200cf5] p-2",children:e.jsx(C,{className:"h-5 w-5 text-white"})}),e.jsx("h2",{className:"text-xl font-bold italic",children:"Progres Pembelajaran"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Progres Kamu"}),e.jsxs("span",{className:"text-lg font-bold",children:[(a==null?void 0:a.progress)||0,"%"]})]}),e.jsx(U,{value:(a==null?void 0:a.progress)||0,className:"h-3"})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg border bg-gray-50 p-4 dark:bg-zinc-700",children:[e.jsx("span",{className:"text-sm font-medium",children:"Status Penyelesaian:"}),e.jsx("div",{className:"flex items-center gap-2",children:a!=null&&a.completed_at?e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"h-5 w-5 text-green-500"}),e.jsx("span",{className:"font-semibold text-green-600",children:"Selesai"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-5 w-5 rounded-full border-2 border-gray-400"}),e.jsx("span",{className:"font-semibold text-gray-600",children:"Sedang Berlangsung"})]})})]}),(a==null?void 0:a.completed_at)&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Diselesaikan pada:"," ",new Date(a.completed_at).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]}),e.jsxs("div",{className:"rounded-2xl border bg-white p-6 shadow-lg dark:bg-zinc-800",children:[e.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[e.jsx("div",{className:"rounded-full bg-gradient-to-br from-green-400 to-emerald-600 p-2",children:e.jsx(D,{className:"h-5 w-5 text-white"})}),e.jsx("h2",{className:"text-xl font-bold italic",children:"Poin Utama"})]}),e.jsx("ul",{className:"space-y-3",children:m.map((x,N)=>e.jsxs("li",{className:"flex items-start gap-3 rounded-lg bg-green-50 p-3 dark:bg-green-900/20",children:[e.jsx(D,{size:18,className:"mt-0.5 min-w-5 flex-shrink-0 text-green-600"}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:x})]},N))})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"sticky top-6 rounded-2xl border bg-white p-6 shadow-lg dark:bg-zinc-800",children:[e.jsx("h3",{className:"mb-4 text-center font-semibold",children:s.title}),e.jsxs("div",{className:"group relative overflow-hidden rounded-xl",children:[e.jsx("img",{src:s.thumbnail?`/storage/${s.thumbnail}`:"/assets/images/placeholder.png",alt:s.title,className:"aspect-video w-full object-cover shadow-lg transition-transform group-hover:scale-105"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 transition-opacity group-hover:opacity-100"})]}),e.jsx("p",{className:"mt-4 text-center text-sm text-gray-600 dark:text-gray-400",children:s.short_description}),e.jsxs(n,{className:"mt-4 w-full",onClick:()=>K.get(route("learn.course.detail",{course:s.slug})),children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),h?"Lihat Kembali Materi":"Lanjutkan Belajar"]}),e.jsxs("div",{className:"mt-4 space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Level:"}),e.jsx("span",{className:"font-semibold capitalize",children:s.level})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Kategori:"}),e.jsx("span",{className:"font-semibold",children:s.category.name})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Terdaftar:"}),e.jsx("span",{className:"font-semibold",children:new Date(a.created_at).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})})]})]})]})})]})]}):e.jsx("div",{className:"flex h-screen items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"mb-4",children:"Detail kelas tidak dapat ditemukan."}),e.jsx(n,{asChild:!0,children:e.jsxs(u,{href:"/profile",children:[e.jsx(v,{className:"mr-2 h-4 w-4"})," Kembali Ke Dashboard"]})})]})})}),s&&e.jsx(H,{isOpen:g,onClose:()=>r(!1),course:{id:s.id,title:s.title,thumbnail:s.thumbnail,description:s.description||s.short_description||""}})]})}export{Fe as default};
