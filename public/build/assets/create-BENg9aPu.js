import{r as h,j as e,L as $,S as W}from"./app-DdB2A5Dw.js";import{B as F}from"./button-DuWTHB2D.js";import{C as q}from"./checkbox-Dpn0mGo4.js";import{C as Q,a as X,b as Y,c as Z,d as ee,e as ae}from"./command-DjT5iKjF.js";import{u as re,F as se,a as p,b as n,c as l,d as u,e as d,f as v}from"./form-Bb-SYTLI.js";import{I as g}from"./input-CHVQz7Lu.js";import{L as te}from"./label-TINqz-OW.js";import{P as oe,a as ie,b as ne}from"./popover-Cm6DszfP.js";import{R as le,a as C}from"./radio-group-C7_5FaER.js";import{S as me}from"./switch-BSWPrmWf.js";import{T as ce}from"./textarea-4WxU4Owk.js";import{A as pe}from"./admin-layout-CtsKd7SS.js";import{c as T,r as E,p as M}from"./utils-BT0-AaAZ.js";import{s as de,o as he,c as ue,e as xe,n as D,a as ge,b as j}from"./types-DM_dDpPB.js";import{E as je}from"./Editor-DUo47uJD.js";import{t as y}from"./index-Nikv01fL.js";import fe from"./course-modules-section-B_EpSFQc.js";import{B as ke}from"./book-marked-BHZE5OYT.js";import{C as be}from"./chevrons-up-down-OF3e-HZ6.js";import{C as ve}from"./check-hCOhXt-L.js";/* empty css            */import"./index-C_58cDia.js";import"./index-Bh5i4We8.js";import"./index-Dn1OfRgS.js";import"./index-BXIK8wgw.js";import"./index-CdI3Rw0Y.js";import"./index-BVBmWXWb.js";import"./floating-ui.react-dom-D5I4BhsJ.js";import"./index-BxMCsd2X.js";import"./index-wGDUyhuv.js";import"./index-D3ARJrmd.js";import"./Combination-Bo2uJVs8.js";import"./dialog-CMy7kuwA.js";import"./x-CwA3caz3.js";import"./createLucideIcon-D7XDAp_e.js";import"./search-BRM2tQyp.js";import"./dropdown-menu-WfZ6ZapD.js";import"./index-BPuBwulD.js";import"./sonner-D9HiYs7g.js";import"./breadcrumbs-_vH4f-sp.js";import"./tooltip-BofLwWQx.js";import"./index-DvXJKeK6.js";import"./avatar-DLZpHzVI.js";import"./use-initials-Bojob7-o.js";import"./user-CA5UZhVV.js";import"./chevron-right-A3trYyd7.js";import"./app-sidebar-header-BD5Uaplx.js";import"./user-check-DOIGGHfG.js";import"./users-GfP0MOYu.js";import"./monitor-play-c-M3iP9_.js";import"./presentation-Dfhax36M.js";import"./gift-Ca0ZAOMN.js";import"./banknote-CnWWzQiT.js";import"./dollar-sign-k8883Fr8.js";import"./file-text-bw9nRXwh.js";import"./index-e_MtIYR0.js";import"./delete-dialog-Y2qwhcB6.js";import"./alert-dialog-6Dgwpz4x.js";import"./badge-Cl3RNrFO.js";import"./separator-Ci5iLOkZ.js";import"./create-lesson-GOl0DkEJ.js";import"./input-error-DkomRtU6.js";import"./select-BGjXDNNF.js";import"./chevron-down-BZPk7rAE.js";import"./chevron-up-DZIuleLO.js";import"./create-module-UyhRudNo.js";import"./edit-lesson-ie5yYS0J.js";import"./edit-module-Cv1IRrL0.js";import"./plus-C2g3aKAt.js";import"./square-pen-Cit-zAba.js";import"./trash-DgIOHw5S.js";import"./badge-check-DlCntsCF.js";import"./lock-CY-R_0TT.js";import"./circle-plus-GPJX7FK1.js";const Ce=[{title:"Kelas Online",href:route("courses.index")},{title:"Tambah Kelas Baru",href:route("courses.create")}],ye=he({title:j().nonempty("Judul harus diisi"),category_id:j().nonempty("Kategori harus dipilih"),short_description:j().max(200).nullable(),description:j().max(1e3).nullable(),key_points:j().max(1e3).nullable(),thumbnail:ge().nullable(),strikethrough_price:D().min(0),price:D().min(0),level:xe(["beginner","intermediate","advanced"]),tools:ue(j()).optional()}).refine(x=>x.strikethrough_price>0?x.strikethrough_price>x.price:!0,{message:"Harga coret harus lebih besar dari harga normal.",path:["strikethrough_price"]});function za({categories:x,tools:I}){const[A,N]=h.useState(!1),[S,B]=h.useState(!1),[K,P]=h.useState(null),[L,R]=h.useState([]),[w,G]=h.useState([]),[U,f]=h.useState(!1),[O,J]=h.useState(!1),[k,z]=h.useState([]),i=re({resolver:de(ye),defaultValues:{title:"",category_id:"",short_description:"",description:"",key_points:`<ul>
                            <li>Mempelajari fitur-fitur untuk bikin web modern (Contoh)</li>
                            <li>Membuat dashboard, cms, dan restful api dengan filament (Contoh)</li>
                            <li>Memahami cara kerja hooks pada reactjs dan nextjs (Contoh)</li>
                        </ul>`,thumbnail:"",strikethrough_price:0,price:0,level:"beginner",tools:[]}});function H(a){const r=new FormData;Object.entries(a).forEach(([o,s])=>{o==="thumbnail"&&s?r.append("thumbnail",s):o==="tools"&&Array.isArray(s)?s.forEach(m=>r.append("tools[]",m)):o!=="thumbnail"&&o!=="sneak_peek_images"&&o!=="tools"&&r.append(o,s)}),L.forEach((o,s)=>{r.append(`sneak_peek_images[${s}]`,o)}),k.forEach((o,s)=>{var m;(m=o.lessons)==null||m.forEach((c,b)=>{c.type==="file"&&c.attachment instanceof File&&r.append(`modules[${s}][lessons][${b}][attachment]`,c.attachment)})});const t=k.map(o=>{var s;return{...o,lessons:(s=o.lessons)==null?void 0:s.map(m=>{const{...c}=m;return c})}});r.append("modules",JSON.stringify(t)),W.post(route("courses.store"),r,{forceFormData:!0})}const V=a=>{const r=Array.from(a.target.files??[]).slice(0,4),t=r.some(s=>s.size>2*1024*1024);if(J(t),t){y("Ukuran setiap gambar maksimal 2MB!");return}R(r);const o=r.map(s=>new Promise(m=>{const c=new FileReader;c.onload=b=>{var _;return m((_=b.target)==null?void 0:_.result)},c.readAsDataURL(s)}));Promise.all(o).then(G)};return e.jsxs(pe,{breadcrumbs:Ce,children:[e.jsx($,{title:"Tambah Kelas Baru"}),e.jsxs("div",{className:"px-4 py-4 md:px-6",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Tambah Kelas Baru"}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-2xl text-sm",children:'Silakan isi form di bawah ini untuk membuat kelas baru. Setelah selesai, klik tombol "Simpan Draft" untuk menyimpan kelas sebagai draft.'}),e.jsxs("div",{className:"grid grid-cols-1 items-start gap-6 lg:grid-cols-2",children:[e.jsx(se,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(H),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-6 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ke,{size:16}),e.jsx("h3",{className:"font-medium",children:"Detail Informasi Kelas"})]}),e.jsx(p,{control:i.control,name:"title",render:({field:a})=>e.jsxs(n,{children:[e.jsx(l,{children:"Judul Kelas"}),e.jsx(u,{children:e.jsx(g,{placeholder:"Masukkan judul kelas",...a,autoComplete:"off"})}),e.jsx(d,{})]})}),e.jsx(p,{control:i.control,name:"category_id",render:({field:a})=>{var r;return e.jsxs(n,{className:"flex flex-col",children:[e.jsx(l,{children:"Kategori"}),e.jsxs(oe,{open:A,onOpenChange:N,children:[e.jsx(ie,{asChild:!0,children:e.jsx(u,{children:e.jsxs(F,{variant:"outline",role:"combobox",className:T("justify-between",!a.value&&"text-muted-foreground"),children:[a.value?(r=x.find(t=>t.id===a.value))==null?void 0:r.name:"Pilih kategori",e.jsx("span",{className:"sr-only",children:"Pilih kategori"}),e.jsx(be,{className:"opacity-50"})]})})}),e.jsx(ne,{className:"p-0",children:e.jsxs(Q,{children:[e.jsx(X,{placeholder:"Cari kategori...",className:"h-9"}),e.jsxs(Y,{children:[e.jsx(Z,{children:"Tidak ada kategori ditemukan."}),e.jsx(ee,{children:x.map(t=>e.jsxs(ae,{value:t.name,onSelect:()=>{i.setValue("category_id",t.id),N(!1)},children:[t.name,e.jsx(ve,{className:T("ml-auto",t.id===a.value?"opacity-100":"opacity-0")})]},t.id))})]})]})})]}),e.jsx(d,{})]})}}),e.jsx(p,{control:i.control,name:"tools",render:()=>e.jsxs(n,{children:[e.jsx(l,{children:"Tools yang Digunakan"}),e.jsx("div",{className:"text-muted-foreground mb-2 text-sm",children:"Pilih tools yang digunakan pada bootcamp ini."}),e.jsx("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:I.map(a=>e.jsx(p,{control:i.control,name:"tools",render:({field:r})=>{var t;return e.jsxs(n,{className:"flex flex-row items-center gap-2 space-y-0",children:[e.jsx(u,{children:e.jsx(q,{checked:(t=r.value)==null?void 0:t.includes(a.id),onCheckedChange:o=>{var s;o?r.onChange([...r.value??[],a.id]):r.onChange((s=r.value)==null?void 0:s.filter(m=>m!==a.id))}})}),e.jsx(l,{className:"text-sm font-normal",children:a.name})]})}},a.id))}),e.jsx(d,{})]})}),e.jsx(p,{control:i.control,name:"short_description",render:({field:a})=>e.jsxs(n,{children:[e.jsx(l,{children:"Deskripsi Singkat"}),e.jsx(u,{children:e.jsx(g,{placeholder:"Masukkan deskripsi singkat",...a,value:a.value??"",autoComplete:"off"})}),e.jsx(d,{})]})}),e.jsx(p,{control:i.control,name:"description",render:({field:a})=>e.jsxs(n,{children:[e.jsx(l,{children:"Deskripsi Lengkap"}),e.jsx(ce,{...a,value:a.value??"",className:"w-full rounded border p-2",placeholder:"Masukkan deskripsi lengkap",autoComplete:"off"}),e.jsx(d,{})]})}),e.jsx(p,{control:i.control,name:"key_points",render:({field:a})=>e.jsxs(n,{children:[e.jsx(l,{children:"Materi (Poin Utama)"}),e.jsx(je,{apiKey:"9fm93mwrg1xyj51jh2isx0m0t3irr4sjgk2ief9b4bdpgpa1",value:a.value??"",onEditorChange:r=>a.onChange(r),init:{plugins:["anchor","autolink","charmap","codesample","emoticons","image","link","lists","media","searchreplace","table","visualblocks","wordcount"],onboarding:!1,toolbar:"undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table mergetags | addcomment showcomments | spellcheckdialog a11ycheck typography | align lineheight | checklist numlist bullist indent outdent | emoticons charmap | removeformat",tinycomments_mode:"embedded",tinycomments_author:"Author name",mergetags_list:[{value:"First.Name",title:"First Name"},{value:"Email",title:"Email"}],height:300}}),e.jsx(d,{})]})}),e.jsx(p,{control:i.control,name:"thumbnail",render:({field:a})=>e.jsxs(n,{children:[e.jsx(l,{children:"Thumbnail (File Upload)"}),e.jsx("img",{src:K||"/assets/images/placeholder.png",alt:"Preview Thumbnail",className:"my-1 mt-2 h-40 w-64 rounded border object-cover"}),e.jsx(g,{type:"file",name:a.name,accept:"image/png, image/jpeg, image/jpg",className:U?"border-red-500 focus-visible:ring-red-500":"",onChange:r=>{var o;const t=((o=r.target.files)==null?void 0:o[0])??null;if(t){if(!["image/png","image/jpeg","image/jpg"].includes(t.type)){f(!0),y("Gambar harus png, jpg, atau jpeg");return}if(t.size>2*1024*1024){f(!0),y("Ukuran file maksimal 2MB!");return}}if(f(!1),a.onChange(t),t){const s=new FileReader;s.onload=m=>{var c;return P((c=m.target)==null?void 0:c.result)},s.readAsDataURL(t)}else P(null)}}),e.jsx(v,{className:"ms-1",children:"Upload gambar. Format: PNG, JPEG atau JPG Max 2 Mb"}),e.jsx(d,{})]})}),e.jsxs(n,{children:[e.jsx(l,{children:"Sneak Peek Kelas (Maksimal 4 gambar)"}),w.length>0&&e.jsx("div",{className:"mb-2 flex flex-wrap gap-2",children:w.map((a,r)=>e.jsx("img",{src:a,alt:`Sneak Peek ${r+1}`,className:"h-24 w-24 rounded border object-cover"},r))}),e.jsx(g,{type:"file",accept:"image/*",multiple:!0,onChange:V,max:4,className:O?"border-red-500 focus-visible:ring-red-500":""}),e.jsx(v,{className:"ms-1",children:"Upload hingga 4 gambar. Format: PNG/JPG, max 2MB per gambar."})]}),e.jsxs("div",{className:"space-y-4 rounded-md border p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(me,{id:"show-strikethrough",checked:S,onCheckedChange:a=>{B(a),a||i.setValue("strikethrough_price",0)}}),e.jsx(te,{htmlFor:"show-strikethrough",children:"Aktifkan Harga Coret (Opsional)"})]}),S&&e.jsx(p,{control:i.control,name:"strikethrough_price",render:({field:a})=>e.jsxs(n,{children:[e.jsx(l,{children:"Harga Coret"}),e.jsx(g,{...a,type:"text",placeholder:"Rp 0",value:E.format(a.value||0),onChange:r=>a.onChange(M(r.target.value)),autoComplete:"off"}),e.jsx(v,{children:"Harga asli yang akan ditampilkan tercoret."}),e.jsx(d,{})]})})]}),e.jsx(p,{control:i.control,name:"price",render:({field:a})=>e.jsxs(n,{children:[e.jsx(l,{children:"Harga"}),e.jsx(g,{...a,type:"text",placeholder:"Masukkan harga kursus",value:E.format(a.value||0),onChange:r=>a.onChange(M(r.target.value)),autoComplete:"off"}),e.jsx(d,{})]})}),e.jsx(p,{control:i.control,name:"level",render:({field:a})=>e.jsxs(n,{className:"space-y-3",children:[e.jsx(l,{children:"Tingkat Kesulitan"}),e.jsx(u,{children:e.jsxs(le,{onValueChange:a.onChange,defaultValue:a.value,className:"flex flex-col",children:[e.jsxs(n,{className:"flex items-center gap-3",children:[e.jsx(u,{children:e.jsx(C,{value:"beginner"})}),e.jsx(l,{className:"font-normal",children:"Beginner"})]}),e.jsxs(n,{className:"flex items-center gap-3",children:[e.jsx(u,{children:e.jsx(C,{value:"intermediate"})}),e.jsx(l,{className:"font-normal",children:"Intermediate"})]}),e.jsxs(n,{className:"flex items-center gap-3",children:[e.jsx(u,{children:e.jsx(C,{value:"advanced"})}),e.jsx(l,{className:"font-normal",children:"Advanced"})]})]})}),e.jsx(d,{})]})})]}),e.jsx(F,{type:"submit",className:"w-full hover:cursor-pointer",children:"Simpan Draft"})]})}),e.jsx(fe,{modules:k,setModules:z,lessons:[],setLessons:()=>{}})]})]})]})}export{za as default};
