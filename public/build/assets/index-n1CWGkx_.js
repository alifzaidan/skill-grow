import{K as fe,r as o,j as e,L as A,$ as V,S as pe}from"./app-BWddE253.js";import{B as m}from"./button-JAm6xe-d.js";import{C as ue}from"./checkbox-DFhmyiOj.js";import{I as y}from"./input-DNYzLX5e.js";import{L as g}from"./label-Cj8NTkY_.js";import{S as W}from"./separator-CylS4w-H.js";import{T as he,a as ge,b as D,c as M}from"./tabs-6Z6FJ8XE.js";import{U as R}from"./user-layout-DUTC_Cv6.js";import{t as E}from"./index-B0LcWcso.js";import{U as Y}from"./user-NgC6OZIU.js";import{B as q}from"./badge-check-C1gV8fiE.js";import{H as je}from"./hourglass-B7MvF3n_.js";import{C as Q}from"./check-D_WF6JjZ.js";import{X as ke}from"./x-BiGQ2tOr.js";/* empty css            */import"./index-BG7aiatV.js";import"./index-B9oiKTUc.js";import"./utils-DTMPkg2Z.js";import"./index-BQgBBFXj.js";import"./index-B0qqDm3A.js";import"./index-C1InXUhS.js";import"./index-CZ-Bl-aA.js";import"./floating-ui.react-dom-CQr-MPIB.js";import"./index-CipZLt54.js";import"./index-B9w_E5v2.js";import"./sonner-CE_aYUJz.js";import"./breadcrumbs-BTYEDD_K.js";import"./createLucideIcon-Dy_-WzhF.js";import"./index-CvJ_GA4Q.js";import"./Combination-DdZhjmZM.js";import"./tooltip-TTpwaSof.js";import"./index-BoZ6bbAu.js";import"./dropdown-menu-CmRSXJy9.js";import"./index-DkWMlfYe.js";import"./avatar-DW9ByZOe.js";import"./use-initials-VA1ZCLUK.js";import"./chevron-right-DIzm3ul3.js";import"./icon-bv7UeH8E.js";import"./badge-p_Y0oLiq.js";import"./command-R95UsUX-.js";import"./dialog-CccPuqWo.js";import"./search-26-NSsMh.js";import"./circle-check-big-CC5J4j83.js";import"./clock-Be9nLf-P.js";import"./house-eMzMKQOx.js";import"./monitor-play-V0L6xREv.js";import"./presentation-DIdJp4Q1.js";function U(r){if(!r)return[];const j=r.match(/<li>(.*?)<\/li>/g);return j?j.map(k=>k.replace(/<\/?li>/g,"").trim()):[]}function ft({bootcamp:r,hasAccess:j,pendingInvoiceUrl:k,referralInfo:d}){var J;const{auth:I}=fe().props,G=!!I.user,v=G&&((J=I.user)==null?void 0:J.phone_number),[S,Z]=o.useState(!1),[b,f]=o.useState(!1),[x,ee]=o.useState(""),[l,w]=o.useState(null),[K,z]=o.useState(!1),[F,p]=o.useState(""),[te,H]=o.useState(!1),[n,P]=o.useState({ig_follow_proof:null,tiktok_follow_proof:null,tag_friend_proof:null}),[c,u]=o.useState({ig_follow_proof:!1,tiktok_follow_proof:!1,tag_friend_proof:!1}),ae=U(r.requirements),se=U(r.benefits),re=U(r.curriculum),i=r.price===0,T=5e3,le=r.price,oe=(l==null?void 0:l.discount_amount)||0,O=le-oe,$=i?0:O+T;o.useEffect(()=>{const a=new URLSearchParams(window.location.search).get("ref");a?sessionStorage.setItem("referral_code",a):d.code&&sessionStorage.setItem("referral_code",d.code)},[d]),o.useEffect(()=>{if(!x.trim()||i){w(null),p("");return}const t=setTimeout(()=>{ie()},500);return()=>clearTimeout(t)},[x]);const ie=async()=>{var t;if(!(!x.trim()||i)){z(!0),p("");try{const s=await(await fetch("/api/discount-codes/validate",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.content)||""},credentials:"same-origin",body:JSON.stringify({code:x,amount:r.price,product_type:"bootcamp",product_id:r.id})})).json();s.valid?(w(s),p("")):(w(null),p(s.message||"Kode promo tidak valid"))}catch{w(null),p("Terjadi kesalahan saat memvalidasi kode promo")}finally{z(!1)}}},ne=async()=>{try{const a=await(await fetch("/csrf-token",{method:"GET",credentials:"same-origin"})).json(),s=document.querySelector('meta[name="csrf-token"]');return s&&(s.content=a.token),a.token}catch(t){throw console.error("Failed to refresh CSRF token:",t),t}},ce=t=>{if(t.preventDefault(),!v){alert("Profil Anda belum lengkap! Harap lengkapi nomor telepon terlebih dahulu."),window.location.href=route("profile.edit");return}if(!n.ig_follow_proof||!n.tiktok_follow_proof||!n.tag_friend_proof){alert("Harap upload semua bukti yang diperlukan!");return}f(!0);const a=new FormData;a.append("type","bootcamp"),a.append("id",r.id),a.append("ig_follow_proof",n.ig_follow_proof),a.append("tiktok_follow_proof",n.tiktok_follow_proof),a.append("tag_friend_proof",n.tag_friend_proof),pe.post(route("enroll.free"),a,{onError:s=>{console.log("Free enrollment errors:",s),alert(s.message||"Gagal mendaftar bootcamp gratis.")},onFinish:()=>{f(!1)}})},me=async t=>{if(t.preventDefault(),!v){alert("Profil Anda belum lengkap! Harap lengkapi nomor telepon terlebih dahulu."),window.location.href=route("profile.edit");return}if(!S&&!i){alert("Anda harus menyetujui syarat dan ketentuan!");return}if(f(!0),i){H(!0),f(!1);return}const a=async(s=0)=>{var X;const h=r.strikethrough_price>0?r.strikethrough_price-r.price:0,xe=(l==null?void 0:l.discount_amount)||0,B={type:"bootcamp",id:r.id,discount_amount:h+xe,nett_amount:O,transaction_fee:T,total_amount:$};l!=null&&l.valid&&(B.discount_code_id=l.discount_code.id,B.discount_code_amount=l.discount_amount);try{const N=(X=document.querySelector('meta[name="csrf-token"]'))==null?void 0:X.content,L=await fetch(route("invoice.store"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":N||"",Accept:"application/json"},credentials:"same-origin",body:JSON.stringify(B)});if(L.status===419&&s<2)return console.log(`CSRF token expired, refreshing... (attempt ${s+1})`),await ne(),a(s+1);const _=await L.json();if(L.ok&&_.success)if(_.payment_url)window.location.href=_.payment_url;else throw new Error("Payment URL not received");else throw new Error(_.message||"Gagal membuat invoice.")}catch(N){throw console.error("Payment error:",N),N}};try{await a()}catch(s){alert(s.message||"Terjadi kesalahan saat proses pembayaran."),f(!1)}},de=(t,a=2)=>{const s=a*1024*1024;return t.size<=s},C=(t,a)=>{if(!a){P(s=>({...s,[t]:null})),u(s=>({...s,[t]:!1}));return}if(!de(a,2)){u(h=>({...h,[t]:!0}));const s=document.querySelector(`input[data-field="${t}"]`);s&&(s.value=""),E.error("Ukuran file terlalu besar. Maksimal 2MB.");return}if(!a.type.startsWith("image/")){u(h=>({...h,[t]:!0}));const s=document.querySelector(`input[data-field="${t}"]`);s&&(s.value=""),E.error("Hanya file gambar (JPG, PNG, GIF, dll) yang diperbolehkan.");return}P(s=>({...s,[t]:a})),u(s=>({...s,[t]:!1})),E.success("File berhasil diunggah.")};if(!G){const t=window.location.href,a=route("login",{redirect:t});return e.jsxs(R,{children:[e.jsx(A,{title:"Login Required"}),e.jsx("section",{className:"to-primary w-full bg-gradient-to-tl from-black px-4",children:e.jsxs("div",{className:"mx-auto my-12 w-full max-w-7xl px-4",children:[e.jsxs("h2",{className:"mx-auto mb-4 max-w-3xl bg-gradient-to-r from-[#71D0F7] via-white to-[#E6834A] bg-clip-text text-center text-3xl font-bold text-transparent italic sm:text-4xl",children:['Daftar Bootcamp "',r.title,'"']}),e.jsx("p",{className:"text-center text-gray-400",children:"Silakan login terlebih dahulu untuk mendaftar bootcamp."})]})}),e.jsx("section",{className:"mx-auto my-4 w-full max-w-7xl px-4",children:e.jsxs("div",{className:"flex h-full flex-col items-center justify-center space-y-4 rounded-lg border p-6 text-center",children:[e.jsx(Y,{size:64,className:"text-blue-500"}),e.jsx("h2",{className:"text-xl font-bold",children:"Login Diperlukan"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Anda perlu login terlebih dahulu untuk mendaftar bootcamp ini.",d.hasActive&&" Kode referral Anda akan tetap tersimpan."]}),e.jsxs("div",{className:"flex w-full max-w-md gap-2",children:[e.jsx(m,{asChild:!0,className:"flex-1",children:e.jsx("a",{href:a,children:"Login"})}),e.jsx(m,{asChild:!0,variant:"outline",className:"flex-1",children:e.jsx(V,{href:route("register",d.code?{ref:d.code}:{}),children:"Daftar"})})]})]})})]})}return v?e.jsxs(R,{children:[e.jsx(A,{title:"Daftar Bootcamp"}),e.jsx("section",{className:"min-h-screen w-full bg-gradient-to-br from-yellow-50 via-white to-blue-50 px-2 py-8",children:e.jsxs("div",{className:"mx-auto flex w-full max-w-7xl flex-col gap-8 lg:flex-row",children:[e.jsxs("div",{className:"flex flex-1 flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-col items-center gap-6 rounded-2xl border bg-white/80 p-6 shadow-lg md:flex-row",children:[e.jsx("img",{src:r.thumbnail?`/storage/${r.thumbnail}`:"/assets/images/placeholder.png",alt:r.title,className:"aspect-video w-full rounded-xl object-cover shadow-md md:w-64"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"mb-2 text-3xl font-bold text-black italic",children:r.title}),e.jsx("p",{className:"mb-4 line-clamp-3 text-gray-600",children:r.description}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("span",{className:"rounded bg-blue-100 px-2 py-1 text-xs font-semibold text-blue-700 uppercase",children:["Batch ",r.batch]}),i&&e.jsx("span",{className:"rounded bg-green-100 px-2 py-1 text-xs font-semibold text-green-700 uppercase",children:"Gratis"})]})]})]}),e.jsxs(he,{defaultValue:"benefits",className:"rounded-2xl border bg-white/80 shadow-lg",children:[e.jsxs(ge,{className:"w-full",children:[e.jsx(D,{value:"benefits",className:"flex-1",children:"Manfaat"}),e.jsx(D,{value:"requirements",className:"flex-1",children:"Persyaratan"}),e.jsx(D,{value:"curriculum",className:"flex-1",children:"Kurikulum"})]}),e.jsxs(M,{value:"benefits",className:"p-6",children:[e.jsx("h3",{className:"mb-4 text-xl font-bold text-black italic",children:"Yang akan kamu dapatkan"}),e.jsx("ul",{className:"space-y-3",children:se.map((t,a)=>e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(q,{size:20,className:"mt-1 min-w-5 flex-shrink-0 text-green-600"}),e.jsx("p",{className:"text-sm md:text-base",children:t})]},a))})]}),e.jsxs(M,{value:"requirements",className:"p-6",children:[e.jsx("h3",{className:"mb-4 text-xl font-bold text-black italic",children:"Persyaratan Peserta"}),e.jsx("ul",{className:"space-y-3",children:ae.map((t,a)=>e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(q,{size:20,className:"mt-1 min-w-5 flex-shrink-0 text-green-600"}),e.jsx("p",{className:"text-sm md:text-base",children:t})]},a))})]}),e.jsxs(M,{value:"curriculum",className:"p-6",children:[e.jsx("h3",{className:"mb-4 text-xl font-bold text-black italic",children:"Kurikulum Bootcamp"}),e.jsx("ul",{className:"space-y-3",children:re.map((t,a)=>e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsxs("span",{className:"mt-1 min-w-6 flex-shrink-0 font-semibold text-blue-600",children:[a+1,"."]}),e.jsx("p",{className:"text-sm md:text-base",children:t})]},a))})]})]})]}),e.jsx("div",{className:"w-full flex-shrink-0 lg:w-[400px]",children:e.jsx("div",{className:"sticky top-8 flex flex-col gap-4 rounded-2xl border-2 border-blue-100 bg-white/90 p-6 shadow-2xl",children:j?e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 text-center",children:[e.jsx(q,{size:64,className:"text-green-500"}),e.jsx("h2",{className:"text-xl font-bold",children:"Anda Sudah Memiliki Akses"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Anda sudah terdaftar di bootcamp ini. Silakan masuk ke dalam grup."}),e.jsx(m,{asChild:!0,className:"w-full",children:e.jsx("a",{href:r.group_url??"",target:"_blank",rel:"noopener noreferrer",children:"Masuk Group Bootcamp"})})]}):k?e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 text-center",children:[e.jsx(je,{size:64,className:"text-yellow-500"}),e.jsx("h2",{className:"text-xl font-bold",children:"Pembayaran Tertunda"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Anda memiliki pembayaran yang belum selesai untuk bootcamp ini. Silakan lanjutkan untuk membayar."}),e.jsx(m,{asChild:!0,className:"w-full",children:e.jsx("a",{href:k,children:"Lanjutkan Pembayaran"})})]}):te?e.jsxs("form",{onSubmit:ce,className:"flex flex-col gap-4",children:[e.jsx("h2",{className:"text-xl font-bold text-black italic",children:"Upload Bukti Follow & Tag"}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"ig_follow_proof",children:"Bukti Follow Instagram"}),e.jsx(y,{id:"ig_follow_proof","data-field":"ig_follow_proof",type:"file",accept:"image/*",onChange:t=>{var a;return C("ig_follow_proof",((a=t.target.files)==null?void 0:a[0])||null)},className:c.ig_follow_proof?"border-red-500 focus:ring-red-500":"",required:!0}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Screenshot halaman profil Instagram kami yang menunjukkan Anda sudah follow (Maks. 2MB)"}),c.ig_follow_proof&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:"File tidak valid. Pastikan ukuran tidak melebihi 2MB dan format gambar."})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"tiktok_follow_proof",children:"Bukti Follow TikTok"}),e.jsx(y,{id:"tiktok_follow_proof","data-field":"tiktok_follow_proof",type:"file",accept:"image/*",onChange:t=>{var a;return C("tiktok_follow_proof",((a=t.target.files)==null?void 0:a[0])||null)},className:c.tiktok_follow_proof?"border-red-500 focus:ring-red-500":"",required:!0}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Screenshot halaman profil TikTok kami yang menunjukkan Anda sudah follow (Maks. 2MB)"}),c.tiktok_follow_proof&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:"File tidak valid. Pastikan ukuran tidak melebihi 2MB dan format gambar."})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"tag_friend_proof",children:"Bukti Tag 3 Teman di Instagram"}),e.jsx(y,{id:"tag_friend_proof","data-field":"tag_friend_proof",type:"file",accept:"image/*",onChange:t=>{var a;return C("tag_friend_proof",((a=t.target.files)==null?void 0:a[0])||null)},className:c.tag_friend_proof?"border-red-500 focus:ring-red-500":"",required:!0}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Screenshot postingan Instagram kami yang menunjukkan Anda sudah tag 3 teman di komentar (Maks. 2MB)"}),c.tag_friend_proof&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:"File tidak valid. Pastikan ukuran tidak melebihi 2MB dan format gambar."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{type:"button",variant:"outline",onClick:()=>{H(!1),u({ig_follow_proof:!1,tiktok_follow_proof:!1,tag_friend_proof:!1}),P({ig_follow_proof:null,tiktok_follow_proof:null,tag_friend_proof:null})},className:"flex-1",children:"Kembali"}),e.jsx(m,{type:"submit",disabled:b||!n.ig_follow_proof||!n.tiktok_follow_proof||!n.tag_friend_proof||c.ig_follow_proof||c.tiktok_follow_proof||c.tag_friend_proof,className:"flex-1",children:b?"Memproses...":"Dapatkan Akses Gratis"})]})]}):e.jsxs("form",{onSubmit:me,className:"flex flex-col gap-4",children:[e.jsx("h2",{className:"text-xl font-bold text-black italic",children:"Ringkasan Pembayaran"}),i?e.jsx("div",{className:"flex items-center justify-center p-4 text-center",children:e.jsx("span",{className:"w-full text-2xl font-bold text-green-600",children:"BOOTCAMP GRATIS"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"promo-code",children:"Kode Promo (Opsional)"}),e.jsxs("div",{className:"relative",children:[e.jsx(y,{id:"promo-code",type:"text",placeholder:"Masukkan kode promo",value:x,onChange:t=>ee(t.target.value.toUpperCase()),className:"w-full pr-10"}),K&&e.jsx("div",{className:"absolute top-1/2 right-3 -translate-y-1/2 transform",children:e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-b-2 border-blue-600"})}),!K&&x&&e.jsx("div",{className:"absolute top-1/2 right-3 -translate-y-1/2 transform",children:l!=null&&l.valid?e.jsx(Q,{className:"h-4 w-4 text-green-600"}):F?e.jsx(ke,{className:"h-4 w-4 text-red-600"}):null})]}),F&&e.jsx("p",{className:"text-sm text-red-600",children:F}),(l==null?void 0:l.valid)&&e.jsxs("div",{className:"rounded-lg border border-green-200 bg-green-50 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-4 w-4 text-green-600"}),e.jsxs("p",{className:"text-sm font-medium text-green-800",children:['Kode promo "',l.discount_code.code,'" berhasil diterapkan!']})]}),e.jsxs("p",{className:"mt-1 text-xs text-green-600",children:[l.discount_code.name," - Diskon ",l.discount_code.formatted_value]})]})]}),e.jsxs("div",{className:"space-y-2 rounded-lg border bg-blue-50/50 p-4",children:[r.strikethrough_price>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Harga Asli"}),e.jsxs("span",{className:"font-semibold text-gray-500 line-through",children:["Rp ",r.strikethrough_price.toLocaleString("id-ID")]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Diskon"}),e.jsxs("span",{className:"font-semibold text-red-500",children:["-Rp ",(r.strikethrough_price-r.price).toLocaleString("id-ID")]})]}),e.jsx(W,{className:"my-2"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Harga Bootcamp"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["Rp ",r.price.toLocaleString("id-ID")]})]}),(l==null?void 0:l.valid)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:["Diskon Promo (",l.discount_code.code,")"]}),e.jsxs("span",{className:"font-semibold text-green-600",children:["-Rp ",l.discount_amount.toLocaleString("id-ID")]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Biaya Transaksi"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["Rp ",T.toLocaleString("id-ID")]})]}),e.jsx(W,{className:"my-2"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold text-black",children:"Total Pembayaran"}),e.jsxs("span",{className:"text-xl font-bold text-black",children:["Rp ",$.toLocaleString("id-ID")]})]})]})]}),!i&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ue,{id:"terms",checked:S,onCheckedChange:t=>Z(t===!0)}),e.jsxs(g,{htmlFor:"terms",className:"text-sm",children:["Saya menyetujui"," ",e.jsx("a",{href:"/terms-and-conditions",target:"_blank",rel:"noopener noreferrer",className:"text-blue-700 hover:underline",children:"syarat dan ketentuan"})]})]}),e.jsx(m,{className:"mt-2 w-full",type:"submit",disabled:(i?!1:!S)||b,children:b?"Memproses...":i?"Upload Bukti Follow":"Lanjutkan Pembayaran"})]})})})]})})]}):e.jsxs(R,{children:[e.jsx(A,{title:"Daftar Bootcamp"}),e.jsx("section",{className:"to-primary w-full bg-gradient-to-tl from-black px-4",children:e.jsxs("div",{className:"mx-auto my-12 w-full max-w-7xl px-4",children:[e.jsxs("h2",{className:"mx-auto mb-4 max-w-3xl bg-gradient-to-r from-[#71D0F7] via-white to-[#E6834A] bg-clip-text text-center text-3xl font-bold text-transparent italic sm:text-4xl",children:['Daftar Bootcamp "',r.title,'"']}),e.jsx("p",{className:"text-center text-gray-400",children:"Silakan lengkapi profil Anda terlebih dahulu."})]})}),e.jsx("section",{className:"mx-auto my-4 w-full max-w-7xl px-4",children:e.jsxs("div",{className:"flex h-full flex-col items-center justify-center space-y-4 rounded-lg border p-6 text-center",children:[e.jsx(Y,{size:64,className:"text-orange-500"}),e.jsx("h2",{className:"text-xl font-bold",children:"Profil Belum Lengkap"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Profil Anda belum lengkap! Harap lengkapi nomor telepon terlebih dahulu untuk mendaftar bootcamp."}),e.jsx(m,{asChild:!0,className:"w-full max-w-md",children:e.jsx(V,{href:route("profile.edit",{redirect:window.location.href}),children:"Lengkapi Profil"})})]})})]})}export{ft as default};
