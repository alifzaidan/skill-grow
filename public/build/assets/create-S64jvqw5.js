import{r as x,j as e,L as O,S as W}from"./app-DM8WU4qo.js";import{B as f}from"./button-wQeEFCsi.js";import{C as V}from"./calendar-DAklw134.js";import{C as z}from"./checkbox-CuhyQNxt.js";import{C as q,a as Y,b as $,c as Q,d as X,e as Z}from"./command-DbiA25Bt.js";import{u as ee,F as ae,a as l,b as i,c as n,d as c,e as o,f as d}from"./form-DC7SQ2Ru.js";import{I as u}from"./input-D_TTwYP8.js";import{L as re}from"./label-DX6QlApD.js";import{P as w,a as S,b as T}from"./popover-CiBNaAxn.js";import{R as se,a as L}from"./radio-group-DXc4ZyBJ.js";import{S as te}from"./switch-CotGtxyG.js";import{T as F}from"./textarea-lK5bCLHa.js";import{A as ie}from"./admin-layout-DwpcE7OO.js";import{c as b,r as R,p as D}from"./utils-IHPBEcNx.js";import{s as ne,o as le,b as p,e as oe,n as v,c as me,f as ce,a as de}from"./types-BxFUTjcQ.js";import{E as pe}from"./Editor-CJDX9TNi.js";import{t as I}from"./index-ZXmprFDL.js";import{P as H}from"./package-moJh_6ra.js";import{C as ue}from"./chevrons-up-down-ZcfDriI8.js";import{C as he}from"./check-B4qUzdrl.js";import{C as B}from"./calendar-DGYh-jRC.js";import{C as xe}from"./clock-Dc22q0K1.js";import{f as E}from"./format-CNjBDjOL.js";import{i as ge}from"./id-BLKIQCr7.js";/* empty css            */import"./index-qzfc2bOd.js";import"./index-oRgEZ05A.js";import"./chevron-left-BuCW9BjC.js";import"./createLucideIcon-C8DbPWpD.js";import"./chevron-right-VZ5RMkaB.js";import"./chevron-down-CthagNqx.js";import"./index-Djev8bmX.js";import"./index-DrD4lKrw.js";import"./index-C_bXY0ew.js";import"./index-hwRCSgTi.js";import"./floating-ui.react-dom-CiGQfdJh.js";import"./index-BXEs0nkn.js";import"./index-DuHyKpCe.js";import"./index-_MxI7jxj.js";import"./Combination-DztvUnKa.js";import"./dialog-A9rioQo9.js";import"./x-z6wdc5_f.js";import"./search-CLCJYn-f.js";import"./dropdown-menu-Brc5XxLt.js";import"./index-eRP8T8fO.js";import"./sonner-VjlpHtRV.js";import"./breadcrumbs-JI6asYb2.js";import"./tooltip-7oqPXcMR.js";import"./index--x9B_ega.js";import"./avatar-DPAfd1QA.js";import"./use-initials-C9SUAaVe.js";import"./user-D3u0iQw1.js";import"./app-sidebar-header-C-h8QzpS.js";import"./user-check-DqlAp9dG.js";import"./users-Da7tXG8o.js";import"./monitor-play-u7_jcJjf.js";import"./presentation-CdcDLPCW.js";import"./gift-DP5zMoM1.js";import"./banknote-HAQ80ffS.js";import"./dollar-sign-Bw7P221h.js";import"./file-text-Cl3hummQ.js";import"./index-Cbltne8z.js";const je=[{title:"Sertifikasi Kerjasama",href:route("partnership-products.index")},{title:"Tambah Produk Baru",href:route("partnership-products.create")}],ke=[{value:"Senin",label:"Senin"},{value:"Selasa",label:"Selasa"},{value:"Rabu",label:"Rabu"},{value:"Kamis",label:"Kamis"},{value:"Jumat",label:"Jumat"},{value:"Sabtu",label:"Sabtu"},{value:"Minggu",label:"Minggu"}],fe=le({title:p().nonempty("Judul harus diisi"),category_id:p().nonempty("Kategori harus dipilih"),short_description:p().nullable(),description:p().nullable(),key_points:p().nullable(),thumbnail:de().nullable(),registration_deadline:ce({required_error:"Batas waktu pendaftaran harus diisi",invalid_type_error:"Batas waktu pendaftaran harus berupa tanggal yang valid"}),duration_days:v().min(0,"Durasi tidak boleh negatif").nullable(),schedule_days:me(p()).min(1,"Pilih minimal 1 hari"),strikethrough_price:v().min(0,"Harga tidak boleh negatif"),price:v().min(0,"Harga tidak boleh negatif"),registration_url:p().url("URL pendaftaran harus valid").nonempty("URL pendaftaran harus diisi"),type:oe(["regular","scholarship"],{required_error:"Tipe kategori harus dipilih"}),scholarship_group_link:p().url("Link grup harus berupa URL yang valid").nullable()}).refine(m=>m.strikethrough_price>0?m.strikethrough_price>m.price:!0,{message:"Harga coret harus lebih besar dari harga normal.",path:["strikethrough_price"]}).refine(m=>m.type==="scholarship"?m.scholarship_group_link&&m.scholarship_group_link.trim()!=="":!0,{message:"Link grup WhatsApp/Telegram harus diisi untuk tipe Beasiswa",path:["scholarship_group_link"]});function Sa({categories:m}){const[U,y]=x.useState(!1),[C,M]=x.useState(!1),[A,N]=x.useState(null),[G,j]=x.useState(!1),[J,_]=x.useState(!1),t=ee({resolver:ne(fe),defaultValues:{title:"",category_id:"",short_description:"",description:"",key_points:"",thumbnail:null,registration_deadline:void 0,duration_days:null,schedule_days:[],strikethrough_price:0,price:0,registration_url:"",type:"regular",scholarship_group_link:""}});function K(a){const r=new Date(a.registration_deadline);r.setHours(23,59,59,999);const s={...a,registration_deadline:E(r,"yyyy-MM-dd HH:mm:ss")};W.post(route("partnership-products.store"),s,{forceFormData:!0})}return e.jsxs(ie,{breadcrumbs:je,children:[e.jsx(O,{title:"Tambah Produk Partnership Baru"}),e.jsxs("div",{className:"px-4 py-4 md:px-6",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Tambah Produk Partnership Baru"}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-2xl text-sm",children:"Tambahkan produk kerjasama dengan partner eksternal. Produk ini akan mengarahkan pengguna ke link pendaftaran eksternal."}),e.jsx(ae,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(K),className:"grid grid-cols-1 items-start gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"space-y-6 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{size:16}),e.jsx("h3",{className:"font-medium",children:"Informasi Produk"})]}),e.jsx(l,{control:t.control,name:"title",render:({field:a})=>e.jsxs(i,{children:[e.jsxs(n,{children:["Judul Produk ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(c,{children:e.jsx(u,{placeholder:"Masukkan judul produk",...a,autoComplete:"off"})}),e.jsx(o,{})]})}),e.jsx(l,{control:t.control,name:"category_id",render:({field:a})=>{var r;return e.jsxs(i,{className:"flex flex-col",children:[e.jsxs(n,{children:["Kategori ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(w,{open:U,onOpenChange:y,children:[e.jsx(S,{asChild:!0,children:e.jsx(c,{children:e.jsxs(f,{variant:"outline",role:"combobox",className:b("justify-between",!a.value&&"text-muted-foreground"),children:[a.value?(r=m.find(s=>s.id===a.value))==null?void 0:r.name:"Pilih kategori",e.jsx(ue,{className:"opacity-50"})]})})}),e.jsx(T,{className:"p-0",children:e.jsxs(q,{children:[e.jsx(Y,{placeholder:"Cari kategori...",className:"h-9"}),e.jsxs($,{children:[e.jsx(Q,{children:"Tidak ada kategori ditemukan."}),e.jsx(X,{children:m.map(s=>e.jsxs(Z,{value:s.name,onSelect:()=>{t.setValue("category_id",s.id),y(!1)},children:[s.name,e.jsx(he,{className:b("ml-auto",s.id===a.value?"opacity-100":"opacity-0")})]},s.id))})]})]})})]}),e.jsx(o,{})]})}}),e.jsx(l,{control:t.control,name:"short_description",render:({field:a})=>e.jsxs(i,{children:[e.jsx(n,{children:"Deskripsi Singkat"}),e.jsx(F,{...a,value:a.value??"",placeholder:"Deskripsi singkat produk (maks 500 karakter)",maxLength:500,autoComplete:"off"}),e.jsx(o,{})]})}),e.jsx(l,{control:t.control,name:"description",render:({field:a})=>e.jsxs(i,{children:[e.jsx(n,{children:"Deskripsi Lengkap"}),e.jsx(F,{...a,value:a.value??"",placeholder:"Deskripsi lengkap produk",rows:6,autoComplete:"off"}),e.jsx(o,{})]})}),e.jsx(l,{control:t.control,name:"key_points",render:({field:a})=>e.jsxs(i,{children:[e.jsx(n,{children:"Poin-Poin Penting"}),e.jsx(pe,{apiKey:"9fm93mwrg1xyj51jh2isx0m0t3irr4sjgk2ief9b4bdpgpa1",value:a.value??"",onEditorChange:r=>a.onChange(r),init:{plugins:["anchor","autolink","charmap","codesample","emoticons","image","link","lists","media","searchreplace","table","visualblocks","wordcount"],toolbar:"undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table | align lineheight | checklist numlist bullist indent outdent | emoticons charmap | removeformat",height:300,menubar:!1}}),e.jsx(d,{children:"Format poin-poin penting dengan bullet list atau numbering"}),e.jsx(o,{})]})}),e.jsx(l,{control:t.control,name:"thumbnail",render:({field:a})=>e.jsxs(i,{children:[e.jsx(n,{children:"Thumbnail"}),e.jsx("img",{src:A||"/assets/images/placeholder.png",alt:"Preview Thumbnail",className:"my-1 mt-2 h-40 rounded border object-cover"}),e.jsx(u,{type:"file",name:a.name,accept:"image/png, image/jpeg, image/jpg, image/webp",className:G?"border-red-500 focus-visible:ring-red-500":"",onChange:r=>{var g;const s=((g=r.target.files)==null?void 0:g[0])??null;if(s){if(!["image/png","image/jpeg","image/jpg","image/webp"].includes(s.type)){j(!0),I.error("Gambar harus png, jpg, jpeg, atau webp");return}if(s.size>2*1024*1024){j(!0),I.error("Ukuran file maksimal 2MB!");return}}if(j(!1),a.onChange(s),s){const h=new FileReader;h.onload=k=>{var P;return N((P=k.target)==null?void 0:P.result)},h.readAsDataURL(s)}else N(null)}}),e.jsx(d,{children:"Format: PNG, JPG, JPEG, WEBP. Maksimal 2MB"}),e.jsx(o,{})]})})]}),e.jsxs("div",{className:"space-y-6 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{size:16}),e.jsx("h3",{className:"font-medium",children:"Harga, Jadwal & URL"})]}),e.jsxs("div",{className:"space-y-4 rounded-md border p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{id:"show-strikethrough",checked:C,onCheckedChange:a=>{M(a),a||t.setValue("strikethrough_price",0)}}),e.jsx(re,{htmlFor:"show-strikethrough",children:"Aktifkan Harga Coret (Opsional)"})]}),C&&e.jsx(l,{control:t.control,name:"strikethrough_price",render:({field:a})=>e.jsxs(i,{children:[e.jsx(n,{children:"Harga Coret"}),e.jsx(u,{...a,type:"text",placeholder:"Rp 0",value:R.format(a.value||0),onChange:r=>a.onChange(D(r.target.value)),autoComplete:"off"}),e.jsx(d,{children:"Harga asli yang akan ditampilkan tercoret."}),e.jsx(o,{})]})})]}),e.jsx(l,{control:t.control,name:"price",render:({field:a})=>e.jsxs(i,{children:[e.jsxs(n,{children:["Harga ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(u,{...a,type:"text",placeholder:"Masukkan harga produk",value:R.format(a.value||0),onChange:r=>a.onChange(D(r.target.value)),autoComplete:"off"}),e.jsx(o,{})]})}),e.jsx(l,{control:t.control,name:"type",render:({field:a})=>e.jsxs(i,{className:"space-y-3",children:[e.jsxs(n,{children:["Tipe Kategori ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(c,{children:e.jsxs(se,{onValueChange:a.onChange,defaultValue:a.value,className:"flex flex-col space-y-1",children:[e.jsxs(i,{className:"flex items-center space-y-0 space-x-3",children:[e.jsx(c,{children:e.jsx(L,{value:"regular"})}),e.jsx(n,{className:"font-normal",children:"Reguler"})]}),e.jsxs(i,{className:"flex items-center space-y-0 space-x-3",children:[e.jsx(c,{children:e.jsx(L,{value:"scholarship"})}),e.jsx(n,{className:"font-normal",children:"Beasiswa"})]})]})}),e.jsx(d,{children:"Pilih apakah produk ini termasuk program reguler atau beasiswa."}),e.jsx(o,{})]})}),t.watch("type")==="scholarship"&&e.jsx(l,{control:t.control,name:"scholarship_group_link",render:({field:a})=>e.jsxs(i,{children:[e.jsxs(n,{children:["Link Grup WhatsApp/Telegram ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(c,{children:e.jsx(u,{...a,type:"url",placeholder:"https://chat.whatsapp.com/xxxxx atau https://t.me/xxxxx",value:a.value??""})}),e.jsx(d,{children:"Link grup WhatsApp atau Telegram untuk peserta beasiswa yang diterima."}),e.jsx(o,{})]})}),e.jsxs("div",{className:"space-y-4 rounded-md border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx("h4",{className:"font-medium",children:"Informasi Jadwal"})]}),e.jsx(l,{control:t.control,name:"registration_deadline",render:({field:a})=>e.jsxs(i,{className:"flex flex-col",children:[e.jsxs(n,{children:["Batas Waktu Pendaftaran ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(w,{open:J,onOpenChange:_,children:[e.jsx(S,{asChild:!0,children:e.jsx(c,{children:e.jsxs(f,{variant:"outline",className:b("w-full pl-3 text-left font-normal",!a.value&&"text-muted-foreground"),children:[a.value?E(a.value,"PPP",{locale:ge}):e.jsx("span",{children:"Pilih tanggal"}),e.jsx(B,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(T,{className:"w-auto p-0",align:"start",children:e.jsx(V,{mode:"single",selected:a.value,captionLayout:"dropdown",endMonth:new Date(new Date().getFullYear()+10,11),onSelect:r=>{r&&a.onChange(r),_(!1)},disabled:r=>{const s=new Date;return s.setHours(0,0,0,0),r<s},initialFocus:!0})})]}),e.jsx(d,{children:"Tanggal terakhir untuk melakukan pendaftaran"}),e.jsx(o,{})]})}),e.jsx(l,{control:t.control,name:"schedule_days",render:()=>e.jsxs(i,{children:[e.jsxs(n,{children:["Hari Pelaksanaan ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(d,{children:"Pilih hari-hari pelaksanaan program"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:ke.map(a=>e.jsx(l,{control:t.control,name:"schedule_days",render:({field:r})=>{var s;return e.jsxs(i,{className:"flex flex-row items-center space-y-0 space-x-3",children:[e.jsx(c,{children:e.jsx(z,{checked:(s=r.value)==null?void 0:s.includes(a.value),onCheckedChange:g=>{var h;return g?r.onChange([...r.value||[],a.value]):r.onChange((h=r.value)==null?void 0:h.filter(k=>k!==a.value))}})}),e.jsx(n,{className:"cursor-pointer font-normal",children:a.label})]},a.value)}},a.value))}),e.jsx(o,{})]})}),e.jsx(l,{control:t.control,name:"duration_days",render:({field:a})=>e.jsxs(i,{children:[e.jsx(n,{children:"Durasi Program (Hari)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"text-muted-foreground h-4 w-4"}),e.jsx(c,{children:e.jsx(u,{type:"number",placeholder:"0",min:"0",...a,value:a.value??"",onChange:r=>a.onChange(r.target.value?parseInt(r.target.value):null),autoComplete:"off",className:"flex-1"})})]}),e.jsx(d,{children:"Total durasi program dalam hari (kosongkan jika tidak ada)"}),e.jsx(o,{})]})})]}),e.jsx(l,{control:t.control,name:"registration_url",render:({field:a})=>e.jsxs(i,{children:[e.jsxs(n,{children:["URL Pendaftaran Eksternal ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(u,{...a,value:a.value??"",type:"url",placeholder:"https://partner.com/register",autoComplete:"off"}),e.jsx(d,{children:"URL untuk mengarahkan user mendaftar/membeli produk di website partner"}),e.jsx(o,{})]})}),e.jsxs("div",{className:"rounded-md border border-amber-200 bg-amber-50 p-4",children:[e.jsx("h4",{className:"mb-2 font-medium text-amber-900",children:"Informasi Penting"}),e.jsxs("ul",{className:"list-inside list-disc space-y-1 text-sm text-amber-800",children:[e.jsx("li",{children:"Produk ini tidak dijual di platform"}),e.jsx("li",{children:"User akan diarahkan ke URL pendaftaran eksternal"}),e.jsx("li",{children:"Setiap klik akan dicatat untuk statistik"}),e.jsx("li",{children:"Pastikan URL pendaftaran valid dan aktif"})]})]})]}),e.jsx(f,{type:"submit",className:"hover:cursor-pointer lg:col-span-2",children:"Simpan Draft"})]})})]})]})}export{Sa as default};
